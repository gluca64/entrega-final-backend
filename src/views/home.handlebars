<h1>Tienda Deportiva</h1>

<div style="margin-bottom: 2rem; background: white; padding: 1rem; border-radius: 8px;">
    <form method="GET" style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <input type="number" name="limit" placeholder="Límite" value="{{limit}}" style="padding: 0.5rem;">
        <select name="sort" style="padding: 0.5rem;">
            <option value="">Sin ordenar</option>
            <option value="asc" {{#if sortAsc}}selected{{/if}}>Precio menor</option>
            <option value="desc" {{#if sortDesc}}selected{{/if}}>Precio mayor</option>
        </select>
        <input type="text" name="query" placeholder="Buscar por categoría" value="{{query}}" style="padding: 0.5rem;">
        <button type="submit" style="padding: 0.5rem 1rem; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Buscar
        </button>
    </form>
</div>

{{#if payload}}
    <div class="products-grid">
        {{#each payload}}
            <div class="product-card">
                <h3>{{this.title}}</h3>
                <p>{{this.description}}</p>
                <span class="category">{{this.category}}</span>
                <div class="price">${{this.price}}</div>
                <p class="stock">Stock: {{this.stock}}</p>
                <p>Código: {{this.code}}</p>
                <a href="/product/{{this._id}}" style="display: inline-block; margin-top: 0.5rem; color: #4CAF50; text-decoration: none;">
                    Ver detalles
                </a>
            </div>
        {{/each}}
    </div>

    <!-- paginacion -->
    <div style="margin-top: 2rem; display: flex; justify-content: center; gap: 1rem; align-items: center;">
        {{#if hasPrevPage}}
            <a href="{{prevLink}}" style="padding: 0.5rem 1rem; background-color: #4CAF50; color: white; text-decoration: none; border-radius: 4px;">
                ← Anterior
            </a>
        {{/if}}

        <span style="padding: 0.5rem 1rem;">
            Página {{page}} de {{totalPages}}
        </span>

        {{#if hasNextPage}}
            <a href="{{nextLink}}" style="padding: 0.5rem 1rem; background-color: #4CAF50; color: white; text-decoration: none; border-radius: 4px;">
                Siguiente →
            </a>
        {{/if}}
    </div>
{{else}}
    <p>No hay productos disponibles</p>
{{/if}}
